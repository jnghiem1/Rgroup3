---
title: "Final Submission Phase 1"
author: "Julma Nghiem, Oye Oyegbami, Vishal Raina, Alvina Cheung"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(readr)
library(data.table)
library(readxl)
library(dplyr)
library(tidyr)
library(ggplot2)
```

### Step 1: Introduction to the Data Set

# Introduction:
The dataset consists of structured sales data from a retail or e-commerce business. It includes information on customer segments, shipping modes, and order details, providing a detailed overview of sales transactions.

##Data Source: 

<<TODO Oye will be providing data source here>>

#Choice of Data Set: 

This data set was chosen because it offers a variety of opportunities for tidying, exploratory data analysis (EDA), and statistical inferences. The dataset's complexity in terms of customer segmentation and shipping modes makes it an ideal candidate for applying diverse data analysis techniques.

## Data Prepration

```{r}
library(readxl)
# Load the dataset
data <- read_excel("structured-sales-data-1.xlsx")
```

2. Variables and Data Types
```{r}

# Listing variables and their data types
str(data)
```
3. Data Structure

```{r}
# Examining the structure of the dataset
summary(data)

```

4. Dimensions of the Data Set
```{r}
# Displaying dimensions
dim(data)
```


5. Data Preview

```{r}
# First 6 rows
head(data, 6)

# Last 6 rows
tail(data, 6)
```


6. & 7. Missing Values

```{r}
# Total missing values
sum(is.na(data))

# Missing values in each column
colSums(is.na(data))
```



```{r}

group_project_data <- read_xlsx ("structured-sales-data-1.xlsx") 
View(group_project_data)


## (1)  The data set is dirty and badly structured. There are some missing value in some column and the Order ID field includes country and            year. 

## (2)  List the variables and their data types.
group_project_data
class(group_project_data)
mode(group_project_data)

## (3)  Examine the structure of the data set.
str(group_project_data)

## (4)  Show the dimensions of the data set. 50 rows and 61 columns. 
nrow(group_project_data)
ncol(group_project_data)

## (5)  Show the first 6 rows and the last 6 rows of data set. 
head(group_project_data)
tail(group_project_data)

## (6)  Identify how many missing values are in your data set?
sum(is.na(group_project_data)) 

## (7)  How many missing values are there in each column?
is.na.data.frame(group_project_data)

## (8) Summarize what cleaning/transforming needs to be done. 
## The rows for the 3 segments need to be aligned and differentiated by their segment names  
## Secondly, the year and country fields need to be extracted from the Order ID.
## Thirdly, the totals and subtotals across each shipping mode computed

```

  STEP 4 Clean and Tidy the data 

```{r}

## Deletion of columns Consumer Total, Corporate Total, and Home Office Total. 

group_project_data_nototal <- group_project_data %>% select(-`Consumer Total`, -`Corporate Total`, - `Home Office Total`) 

##Deletion of row 2 and 3 (Order ID). This row only contains the sub-name or column title for 1st column aka Segment. 

group_project_data_nototal2 <- group_project_data_nototal [-c(1:2,825),]

## Change columns name.  

colnames(group_project_data_nototal2) <- c("Segment>>","Consumer_FirstClass", "Consumer_SameDayClass", "Consumer_SecondClass", "Consumer_StandardClass", "Corporate_FirstClass", "Corporate_SameDayClass", "Corporate_SecondClass", "Corporate_StandardClass", "HomeOffice_FirstClass", "HomeOffice_SameDayClass", "HomeOffice_SecondClass","HomeOffice_StandardClass")

View(group_project_data_nototal2)
  
## Gather or PIVOT-LONGER to combine segments: Consumer, Corporate, Home Office. 

group_project_data_nototal3 <- gather(group_project_data_nototal2, key = "Segment", value = "Price", "Consumer_FirstClass":"HomeOffice_StandardClass")
View(group_project_data_nototal3)

## Convert Price (chr) to numberic. 

group_project_data_nototal3$Price <- as.numeric(group_project_data_nototal3$Price)
str(group_project_data_nototal3)

## Remove all NAs in Price column.  

is.na(group_project_data_nototal3)
colSums(is.na(group_project_data_nototal3))
group_project_data_nototal_final <- group_project_data_nototal3[!is.na(group_project_data_nototal3$Price),]

## Separate segment to country, year, and order iD. 

group_project_data_nototal_final <- separate (group_project_data_nototal_final, "Segment>>", into = c("Country", "Year", "Order ID"), sep = "-")

## For country column, it is either in the United States of Canada.  

group_project_data_nototal_final <- separate (group_project_data_nototal_final, "Segment", into = c("Segment", "Ship Order"), sep = "_")
View(group_project_data_nototal_final)

```

  STEP 5 
  
  (30 points): Perform Exploratory Data Analysis (EDA)
1. Run the summary of the variables in the data set.
2. Learn about the data visually by plotting whichever plot from the list below
applies:
a) Bar plot
b) Histogram
c) Box plot
d) Scatter plot
3. Summarize your findings from the various plots and tables.
4. Uncover new information in the data that is not self-evident (i.e. besides
plotting the data as above, slice and dice the data in different ways, create
new variables, or join separate data frames to create new summary information).


```{r}


```

  STEP 6

  (35 points): Inferences Apply some inferential statistics techniques
covered in Week 10 and in your statistics courses.


```{r}


```
  
  STEP 7

  (35 points):  Predictive Analytics/Modeling Apply some predictive
analytics/modeling techniques covered in Week 10 and in your statistics courses.


```{r}


```
  